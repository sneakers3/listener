/*******************************************************************************
* This file was generated by Tizen Web UI Builder.
* User should hand edit this file.
********************************************************************************/


var editPopup;

function updateSoundList() {
	var soundListView = $('#soundListView');
	soundListView.children().remove();
	for (var i in listenerApp.soundList) {
		var sound = listenerApp.soundList[i];
		var li = $('<li>').text(sound.title).attr('sound-id', sound.id);
		soundListView.append(li);
	}
}

/**
 * @param {Object} event
 * @base _list_page
 * @returns {Boolean}
*/
_list_page.prototype.startButton_ontap = function(event) {
	pageManager.changePage('history', {});
};

/**
 * @param {Object} event
 * @base _list_page
 * @returns {Boolean}
*/
_list_page.prototype.newSoundButton_ontap = function(event) {
	pageManager.changePage('newsound', {});
};

/**
 * @param {Object} event
 * @base _list_page
 * @returns {Boolean}
*/
_list_page.prototype.onpagebeforeshow = function(event) {
	updateSoundList();
};

/**
 * @param {Object} event
 * @base _list_page
 * @returns {Boolean}
*/
_list_page.prototype.settingsButton_ontap = function(event) {
	pageManager.changePage('settings');
};

/**
 * @param {Object} event
 * @base _list_page
 * @returns {Boolean}
*/
_list_page.prototype.soundListView_ontap = function(event) {
	console.log('soundListView tap');
};

/**
 * @param {Object} event
 * @base _list_page
 * @returns {Boolean}
*/
_list_page.prototype.soundListView_ontaphold = function(event) {
	console.log('soundListView taphold');
	var soundID = $(event.target).attr('sound-id');
	var sound = getSoundByID(soundID);
	if (!sound) {
		// TOFIX
		alert('Cannot find sound id: ' + soundID);
		return;
	}
	$('#soundDialogID').val(soundID);
	$('#soundDialogTitleInput').val(sound.title);
	$('#soundDialog').popup('open');
};

/**
 * @param {Object} event
 * @base _list_page
 * @returns {Boolean}
*/
_list_page.prototype.onpageinit = function(event) {
	$('#soundDialogOKButton').on('click', function () {
		console.log('soundDialogOkButton click');
		var soundID = parseInt($('#soundDialogID').val(), 10);
		var newTitle = $('#soundDialogTitleInput').val();
		var result = changeSound(soundID, {title: newTitle});
		if (result) {
			updateSoundList();
		}
	});
};

